
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/admin-layout.html}">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div layout:fragment="content">

    <style>

        /* T·ªïng th·ªÉ form ƒë·∫πp m∆∞·ª£t */
        form#form-search {
            background: linear-gradient(135deg, #222831, #31363F);
            border-radius: 20px;
            padding: 30px 35px;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.1);
            animation: zoomIn 0.6s ease;
            color: #EEEEEE;
            margin-top: 20px;
            font-family: 'Segoe UI', sans-serif;
            border: 1px solid #00adb5;
        }

        /* Ti√™u ƒë·ªÅ ch√≠nh */
        /*h4 {*/
        /*    font-size: 28px;*/
        /*    color: #00adb5;*/
        /*    margin-bottom: 20px;*/
        /*    font-weight: 600;*/
        /*    text-shadow: 0 0 5px #00adb5aa;*/
        /*    animation: fadeSlideDown 0.8s ease;*/
        /*}*/

        /* Label */
        form#form-search label {
            font-weight: 500;
            color: #EEEEEE;
            margin-bottom: 6px;
            font-size: 15px;
        }

        /* Input v√† Select */
        form#form-search input[type="text"],
        form#form-search input[type="date"],
        form#form-search select {
            background-color: #393E46;
            border: 1px solid #00adb5;
            border-radius: 10px;
            color: #EEEEEE;
            padding: 10px 14px;
            font-size: 14px;
            transition: 0.3s ease;
            width: 100%;
        }

        form#form-search input:focus,
        form#form-search select:focus {
            outline: none;
            border-color: #f8b400;
            box-shadow: 0 0 10px #f8b400aa;
        }

        /* Buttons */
        form#form-search .btn {
            border-radius: 10px;
            font-weight: bold;
            padding: 10px 18px;
            letter-spacing: 0.5px;
            box-shadow: 0 0 10px transparent;
            transition: all 0.3s ease;
        }

        form#form-search .btn-primary {
            background-color: #00adb5;
            border-color: #00adb5;
            color: #fff;
        }

        form#form-search .btn-primary:hover {
            background-color: #00ffc3;
            box-shadow: 0 0 15px #00ffc3aa;
            transform: translateY(-2px);
        }

        form#form-search .btn-secondary {
            background-color: #eeeeee;
            border-color: #eeeeee;
            color: #222831;
        }

        form#form-search .btn-secondary:hover {
            background-color: #ffffff;
            box-shadow: 0 0 10px #ffffffaa;
        }

        /* Responsive row spacing */
        .form-row {
            margin-bottom: 20px;
            gap: 15px;
        }

        /* Animation x·ªãn x√≤ */
        @keyframes zoomIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes fadeSlideDown {
            0% {
                opacity: 0;
                transform: translateY(-15px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animated-title {
            font-weight: bold;
            font-size: 28px;
            text-align: center;
            background: linear-gradient(270deg, #ff6ec4, #7873f5, #4ade80);
            background-size: 600% 600%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: rainbowText 5s ease infinite;
            color: #4ade80;
            transition: color 0.5s ease, text-shadow 0.5s ease;
        }

        .neon-title {
            font-weight: bold;
            font-size: 28px;
            color: #4ade80;
            transition: color 0.5s ease, text-shadow 0.5s ease;
            text-align: center;
        }

        .neon-title:hover {
            color: #22d3ee;
            text-shadow: 0 0 5px #22d3ee, 0 0 10px #22d3ee;
            cursor: pointer;
        }

        .fade-in-title {
            font-weight: bold;
            font-size: 28px;
            color: #6366f1;
            animation: fadeIn 1.5s ease-in forwards;
            opacity: 0;
            text-align: center;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }


        @keyframes rainbowText {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        input.form-control, select.form-select {
            background: linear-gradient(135deg, #f0f4f8, #e0f7fa);
            transition: background 1.5s ease;
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 8px 12px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
            color: #333; /* üí° Th√™m d√≤ng n√†y ƒë·ªÉ ch·ªØ kh√¥ng tr·∫Øng */
        }

        /* Khi hover v√†o input, n·ªÅn s·∫Ω chuy·ªÉn m√†u nh·∫π */
        input.form-control:hover,
        select.form-select:hover {
            background: linear-gradient(135deg, #e0f7fa, #fce4ec);
        }

        /* Khi focus (click v√†o), n·ªïi b·∫≠t h∆°n */
        input.form-control:focus,
        select.form-select:focus {
            background: linear-gradient(135deg, #fff1f2, #e0f2f1);
            border-color: #7c3aed;
            box-shadow: 0 0 0 2px rgba(124, 58, 237, 0.3);
            outline: none;
        }

        input.form-control, select.form-select {
            animation: fadeSlide 0.6s ease-in-out;
        }

        @keyframes fadeSlide {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        form#form-search input,
        form#form-search select,
        form#form-search textarea {
            background: linear-gradient(135deg, #f0f4f8, #e0f7fa);
            transition: background 1.2s ease;
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 8px 12px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
            color: #333 !important; /* ‚úÖ Ch·ªØ r√µ r√†ng */
            font-size: 14px;
        }

        form#form-search input::placeholder,
        form#form-search textarea::placeholder {
            color: #888;
        }

        form#form-search input:hover,
        form#form-search select:hover,
        form#form-search textarea:hover {
            background: linear-gradient(135deg, #e0f7fa, #fce4ec);
        }

        form#form-search input:focus,
        form#form-search select:focus,
        form#form-search textarea:focus {
            background: linear-gradient(135deg, #fff1f2, #e0f2f1);
            border-color: #7c3aed;
            box-shadow: 0 0 0 2px rgba(124, 58, 237, 0.3);
            outline: none;
        }

        /* Style chung cho header */
        thead.thead-light th {
            background: linear-gradient(135deg, #fdfbfb, #ebedee);
            color: #333;
            font-weight: 600;
            padding: 12px;
            vertical-align: middle;
            text-align: center;
            position: relative;
            transition: background 0.6s ease;
            border-bottom: 2px solid #dee2e6;
        }

        /*!* Hi·ªáu ·ª©ng ri√™ng cho "M√£ h√≥a ƒë∆°n" *!*/
        /*thead.thead-light th:first-child {*/
        /*    background: linear-gradient(135deg, #e0c3fc, #8ec5fc);*/
        /*    color: #fff;*/
        /*    animation: colorPulse 3s ease-in-out infinite;*/
        /*    border-radius: 8px 0 0 8px;*/
        /*}*/

        /*!* Animation ƒë·ªïi m√†u *!*/
        /*@keyframes colorPulse {*/
        /*    0%   { background: linear-gradient(135deg, #e0c3fc, #8ec5fc); }*/
        /*    50%  { background: linear-gradient(135deg, #f093fb, #f5576c); }*/
        /*    100% { background: linear-gradient(135deg, #e0c3fc, #8ec5fc); }*/
        /*}*/

        /*!* N√∫t sort (‚Üë ‚Üì) *!*/
        /*.sort-link {*/
        /*    color: #666;*/
        /*    margin-left: 4px;*/
        /*    font-size: 14px;*/
        /*    transition: color 0.3s ease;*/
        /*}*/

        /*.sort-link:hover {*/
        /*    color: #007bff;*/
        /*    transform: scale(1.1);*/
        /*}*/

        /*!* N·∫øu mu·ªën bo g√≥c c·ªôt cu·ªëi c√πng *!*/
        /*thead.thead-light th:last-child {*/
        /*    border-radius: 0 8px 8px 0;*/
        /*}*/

        /*thead.thead-light th {*/
        /*    background: linear-gradient(135deg, #fdfbfb, #ebedee);*/
        /*    color: #333;*/
        /*    font-weight: 600;*/
        /*    padding: 12px;*/
        /*    vertical-align: middle;*/
        /*    text-align: center;*/
        /*    animation: pinkWave 3s ease-in-out infinite;*/
        /*}*/

        /*!* Hi·ªáu ·ª©ng m√†u h·ªìng nh·∫π nh√†ng *!*/
        /*@keyframes pinkWave {*/
        /*    0%, 100% {*/
        /*        background: linear-gradient(135deg, #fdfbfb, #ebedee);*/
        /*    }*/
        /*    50% {*/
        /*        background: linear-gradient(135deg, #ffe0f0, #fbcfe8); !* h·ªìng ph·ªõt nh·∫π *!*/
        /*    }*/
        /*}*/

        /*!* Delay d·∫ßn t·ª´ tr√°i sang ph·∫£i *!*/
        /*thead.thead-light th:nth-child(1) { animation-delay: 0s; }*/
        /*thead.thead-light th:nth-child(2) { animation-delay: 0.2s; }*/
        /*thead.thead-light th:nth-child(3) { animation-delay: 0.4s; }*/
        /*thead.thead-light th:nth-child(4) { animation-delay: 0.6s; }*/
        /*thead.thead-light th:nth-child(5) { animation-delay: 0.8s; }*/
        /*thead.thead-light th:nth-child(6) { animation-delay: 1s; }*/
        /*thead.thead-light th:nth-child(7) { animation-delay: 1.2s; }*/
        /*thead.thead-light th:nth-child(8) { animation-delay: 1.4s; }*/
        /*thead.thead-light th:nth-child(9) { animation-delay: 1.6s; }*/
        /*thead.thead-light th:nth-child(10) { animation-delay: 1.8s; }*/

        /*!* Table row hover effect *!*/
        /*.clickable-row {*/
        /*    cursor: pointer;*/
        /*    transition: background-color 0.3s ease;*/
        /*}*/
        /*.clickable-row:hover {*/
        /*    background-color: #f5f5f5;*/
        /*}*/

        /*!* Align text center for all table cells *!*/
        /*table td, table th {*/
        /*    vertical-align: middle;*/
        /*    text-align: center;*/
        /*    padding: 10px;*/
        /*}*/

        /*!* Icon v√† vƒÉn b·∫£n trong thanh to√°n n·∫±m ngang h√†ng *!*/
        /*td svg {*/
        /*    vertical-align: middle;*/
        /*}*/

        /*!* Payment types styling *!*/
        /*td span svg {*/
        /*    margin-right: 6px;*/
        /*}*/

        /*!* Status label common style *!*/
        /*td span[class*="text-"] {*/
        /*    display: inline-block;*/
        /*    font-size: 0.9rem;*/
        /*    padding: 5px 10px;*/
        /*    border-radius: 8px;*/
        /*    font-weight: 600;*/
        /*}*/

        /*!* T√πy ch·ªânh m√†u border v√† background cho tr·∫°ng th√°i *!*/
        /*.text-warning {*/
        /*    background-color: #fff8e1;*/
        /*    color: #ff9800;*/
        /*}*/
        /*.text-primary {*/
        /*    background-color: #e3f2fd;*/
        /*    color: #2196f3;*/
        /*}*/
        /*.text-secondary {*/
        /*    background-color: #eeeeee;*/
        /*    color: #6c757d;*/
        /*}*/
        /*.text-success {*/
        /*    background-color: #e8f5e9;*/
        /*    color: #4caf50;*/
        /*}*/

        /*!* Responsive *!*/
        /*@media (max-width: 768px) {*/
        /*    table td, table th {*/
        /*        font-size: 0.85rem;*/
        /*        padding: 8px 4px;*/
        /*    }*/

        /*    td span svg {*/
        /*        width: 18px;*/
        /*        height: 18px;*/
        /*    }*/
        /*}*/

        /*!* CƒÉn b·∫£n cho row *!*/
        /*tbody tr td {*/
        /*    position: relative;*/
        /*    overflow: hidden;*/
        /*    background-color: #000;*/
        /*    color: #0ff;*/
        /*    box-shadow: inset 0 0 10px #0ff;*/
        /*    transition: all 0.3s ease;*/
        /*}*/

        /*!* Hover v√†o to√†n b·ªô row th√¨ td s√°ng *!*/
        /*tbody tr:hover td {*/
        /*    color: #000; !* ch·ªØ m√†u ƒëen *!*/
        /*    background-color: #e3f2fd; !* nh·∫π √°nh xanh glow *!*/
        /*    box-shadow: 0 0 10px #0ff, 0 0 20px #0ff, inset 0 0 10px #0ff;*/
        /*}*/

        /*!* Pseudo-element √°nh s√°ng *!*/
        /*tbody tr td::before {*/
        /*    content: "";*/
        /*    position: absolute;*/
        /*    top: 0;*/
        /*    left: -75%;*/
        /*    width: 50%;*/
        /*    height: 100%;*/
        /*    background: linear-gradient(120deg, transparent, rgba(255,255,255,0.4), transparent);*/
        /*    transform: skewX(-20deg);*/
        /*    pointer-events: none;*/
        /*}*/

        /*!* Khi hover row th√¨ td ch·∫°y √°nh s√°ng *!*/
        /*tbody tr:hover td::before {*/
        /*    animation: sweepLight 0.7s ease forwards;*/
        /*}*/

        /*!* Animation *!*/
        /*@keyframes sweepLight {*/
        /*    0% {*/
        /*        left: -75%;*/
        /*    }*/
        /*    100% {*/
        /*        left: 125%;*/
        /*    }*/
        /*}*/
        /*th.scope-highlight {*/
        /*    color: #ff00ff; !* b·∫Øt ƒë·∫ßu m√†u h·ªìng *!*/
        /*    animation: flickerColor 1s infinite alternate;*/
        /*    text-shadow:*/
        /*            0 0 5px #ff00ff,*/
        /*            0 0 10px #00ffff,*/
        /*            0 0 15px #ff00ff;*/
        /*}*/

        /*@keyframes flickerColor {*/
        /*    0% {*/
        /*        color: #ff00ff; !* h·ªìng *!*/
        /*        text-shadow:*/
        /*                0 0 5px #ff00ff,*/
        /*                0 0 10px #ff00ff;*/
        /*    }*/
        /*    50% {*/
        /*        color: #00ffff; !* xanh *!*/
        /*        text-shadow:*/
        /*                0 0 5px #00ffff,*/
        /*                0 0 10px #00ffff;*/
        /*    }*/
        /*    100% {*/
        /*        color: #ff00ff; !* h·ªìng l·∫°i *!*/
        /*        text-shadow:*/
        /*                0 0 5px #ff00ff,*/
        /*                0 0 10px #00ffff;*/
        /*    }*/
        /*}*/

        /*!* Style cho n√∫t h·ªßy ƒë∆°n *!*/
        /*.cancel-btn {*/
        /*    cursor: pointer;*/
        /*    border-radius: 6px;*/
        /*    padding: 6px;*/
        /*    transition: all 0.3s ease-in-out;*/
        /*    box-shadow: 0 0 8px rgba(255, 0, 0, 0.5);*/
        /*}*/
        /*.cancel-btn:hover {*/
        /*    transform: scale(1.1);*/
        /*    box-shadow: 0 0 12px rgba(255, 0, 0, 0.9);*/
        /*    background-color: rgba(255, 0, 0, 0.1);*/
        /*}*/

        /*!* Style cho n√∫t c·∫≠p nh·∫≠t tr·∫°ng th√°i *!*/
        /*.btn-update-status {*/
        /*    cursor: pointer;*/
        /*    border-radius: 6px;*/
        /*    padding: 6px;*/
        /*    transition: all 0.3s ease-in-out;*/
        /*    color: #0f0; !* m√†u m·∫∑c ƒë·ªãnh *!*/
        /*    box-shadow: 0 0 8px rgba(0, 255, 0, 0.5);*/
        /*}*/
        /*.btn-update-status:hover {*/
        /*    transform: scale(1.1);*/
        /*    color: #fff;*/
        /*    background-color: rgba(0, 255, 0, 0.1);*/
        /*    box-shadow: 0 0 12px rgba(0, 255, 0, 0.9);*/
        /*}*/

        /*!* Hi·ªáu ·ª©ng hover-green n·∫øu b·∫°n d√πng th√™m class n√†y *!*/
        /*.hover-green:hover {*/
        /*    animation: pulse-green 1s infinite;*/
        /*}*/

        /*@keyframes pulse-green {*/
        /*    0% {*/
        /*        box-shadow: 0 0 6px #0f0;*/
        /*    }*/
        /*    50% {*/
        /*        box-shadow: 0 0 12px #0f0;*/
        /*    }*/
        /*    100% {*/
        /*        box-shadow: 0 0 6px #0f0;*/
        /*    }*/
        /*}*/

        /*.pagination {*/
        /*    display: flex;*/
        /*    padding-left: 0;*/
        /*    list-style: none;*/
        /*    border-radius: 0.25rem;*/
        /*    background: #fff;*/
        /*    box-shadow: 0 0 10px rgba(0,255,255,0.1);*/
        /*}*/

        /*.page-item {*/
        /*    margin: 0 2px;*/
        /*    transition: transform 0.3s ease-in-out;*/
        /*}*/

        /*.page-item.disabled .page-link {*/
        /*    opacity: 0.5;*/
        /*    cursor: not-allowed;*/
        /*    color: #aaa;*/
        /*    background: #222;*/
        /*    border: 1px solid #444;*/
        /*}*/

        /*.page-link {*/
        /*    color: #0ff;*/
        /*    background-color: #000;*/
        /*    border: 1px solid #0ff;*/
        /*    padding: 8px 12px;*/
        /*    border-radius: 6px;*/
        /*    transition: all 0.3s ease;*/
        /*    box-shadow: 0 0 8px rgba(0,255,255,0.3);*/
        /*    text-decoration: none;*/
        /*}*/

        /*.page-link i {*/
        /*    pointer-events: none;*/
        /*}*/

        /*.page-item:not(.disabled):hover {*/
        /*    transform: scale(1.1);*/
        /*}*/

        /*.page-item:not(.disabled) .page-link:hover {*/
        /*    color: #fff;*/
        /*    background-color: #0ff;*/
        /*    box-shadow: 0 0 15px #0ff, 0 0 30px #0ff;*/
        /*    border-color: #0ff;*/
        /*}*/

        /*!* Hi·ªáu ·ª©ng √°nh s√°ng nh·∫•p nh√°y nh·∫π *!*/
        /*@keyframes soft-glow {*/
        /*    0% {*/
        /*        box-shadow: 0 0 8px #0ff;*/
        /*    }*/
        /*    50% {*/
        /*        box-shadow: 0 0 16px #0ff;*/
        /*    }*/
        /*    100% {*/
        /*        box-shadow: 0 0 8px #0ff;*/
        /*    }*/
        /*}*/
        /*.page-item:not(.disabled):hover .page-link {*/
        /*    animation: soft-glow 1s ease-in-out infinite;*/
        /*}*/


    </style>


    <input type="hidden" id="pageValue" th:value="${param.page}"/>
    <input type="hidden" id="sortValue" th:value="${param.sort}"/>
    <input type="hidden" id="ngayTaoStartValue" th:value="${param.ngayTaoStart}"/>
    <input type="hidden" id="ngayTaoEndValue" th:value="${param.ngayTaoEnd}"/>

    <h4 class="animated-title neon-title fade-in-title">Qu·∫£n l√Ω h√≥a ƒë∆°n</h4>

    <form th:action="@{/admin/bill-list}" method="GET" id="form-search">
        <div class="my-3">
            <div class="row">
                <div class="form-group col-md-4">
                    <label for="maDinhDanh">M√£ h√≥a ƒë∆°n</label>
                    <input type="text" class="form-control" id="maDinhDanh" name="maDinhDanh" placeholder="M√£ h√≥a ƒë∆°n" th:value="${maHoaDon}">
                </div>
                <div class="form-group col-md-4">
                    <label for="ngayTaoStart">B·∫Øt ƒë·∫ßu</label>
                    <input type="date" class="form-control" id="ngayTaoStart" name="ngayTaoStart" th:value="${ngayTaoStart}">
                </div>
                <div class="form-group col-md-4">
                    <label for="ngayTaoEnd">K·∫øt th√∫c</label>
                    <input type="date" class="form-control" id="ngayTaoEnd" name="ngayTaoEnd" th:value="${ngayTaoEnd}">
                </div>

                <div class="form-group col-md-4">
                    <label for="trangThai">Tr·∫°ng th√°i</label>
                    <select class="form-select" id="trangThai" name="trangThai">
                        <option value="">T·∫•t c·∫£</option>
                        <option value="CHO_XAC_NHAN" th:selected="${trangThai == 'CHO_XAC_NHAN'}">Ch·ªù x√°c nh·∫≠n</option>
                        <option value="CHO_HANG_VE" th:selected="${trangThai == 'CHO_HANG_VE'}">Ch·ªù h√†ng v·ªÅ</option>
                        <option value="CHO_LAY_HANG" th:selected="${trangThai == 'CHO_LAY_HANG'}">Ch·ªù l·∫•y h√†ng</option>
                        <option value="CHO_GIAO_HANG" th:selected="${trangThai == 'CHO_GIAO_HANG'}">Ch·ªù giao h√†ng</option>
                        <option value="HOAN_THANH" th:selected="${trangThai == 'HOAN_THANH'}">Ho√†n th√†nh</option>
                        <option value="THAT_BAI" th:selected="${trangThai == 'THAT_BAI'}">Th·∫•t b·∫°i</option>
                        <option value="HUY" th:selected="${trangThai == 'HUY'}">H·ªßy</option>
                    </select>
                </div>

                <div class="form-group col-md-4">
                    <label for="loaiDon">Lo·∫°i ƒë∆°n</label>
                    <select class="form-select" id="loaiDon" name="loaiDon">
                        <option value="">T·∫•t c·∫£</option>
                        <option value="OFFLINE" th:selected="${loaiDon == 'OFFLINE'}">T·∫°i qu·∫ßy</option>
                        <option value="ONLINE" th:selected="${loaiDon == 'ONLINE'}">Tr·ª±c tuy·∫øn</option>
                    </select>
                </div>

                <div class="form-group col-md-4">
                    <label for="hoVaTen">H·ªç v√† t√™n</label>
                    <input type="text" class="form-control" id="hoVaTen" name="hoVaTen" placeholder="H·ªç v√† t√™n" th:value="${hoVaTen}">
                </div>

                <div class="form-group col-md-4">
                    <label for="soDienThoai">S·ªë ƒëi·ªán tho·∫°i</label>
                    <input type="text" class="form-control" id="soDienThoai" name="soDienThoai" placeholder="S·ªë ƒëi·ªán tho·∫°i" th:value="${soDienThoai}">
                </div>
            </div>
            <div class="text-end mt-3">
                <button type="submit" class="btn btn-primary m-1"><i class="fa fa-search"></i> T√¨m ki·∫øm</button>
                <a th:href="@{/admin/bill-list}" class="btn btn-secondary m-1"> H·ªßy b·ªè</a>
            </div>


        </div>
    </form>

    <div class="alert alert-success" role="alert" th:if="${message}">
        <span th:text="${message}"></span>
    </div>
    <table class="table table-hover border my-3" style="cursor: pointer; font-size: 13px" id="billTable">
        <thead class="thead-light">
        <tr>
            <th scope="col">M√£ h√≥a ƒë∆°n
                <a th:href="@{/admin/bill-list(page=0, sort=${sortField == 'code' && sortDirection == 'asc' ? 'code,desc' : 'code,asc'}, maDinhDanh=${maDinhDanh}, ngayTaoStart=${ngayTaoStart}, ngayTaoEnd=${ngayTaoEnd}, trangThai=${trangThai}, loaiDon=${loaiDon}, hoVaTen=${hoVaTen}, soDienThoai=${soDienThoai})}"
                   class="sort-link">‚Üë</a>
                <a th:href="@{/admin/bill-list(page=0, sort=${sortField == 'code' && sortDirection == 'desc' ? 'code,asc' : 'code,desc'}, maDinhDanh=${maDinhDanh}, ngayTaoStart=${ngayTaoStart}, ngayTaoEnd=${ngayTaoEnd}, trangThai=${trangThai}, loaiDon=${loaiDon}, hoVaTen=${hoVaTen}, soDienThoai=${soDienThoai})}"
                   class="sort-link">‚Üì</a>
            </th>
            <!--            <th scope="col">M√£ ƒë·ªïi tr·∫£</th>-->
            <th scope="col">H·ªç v√† t√™n
                <a th:href="@{/admin/bill-list(page=0, sort=${sortField == 'hoVaTen' && sortDirection == 'asc' ? 'hoVaTen,desc' : 'hoVaTen,asc'}, maDinhDanh=${maDinhDanh}, ngayTaoStart=${ngayTaoStart}, ngayTaoEnd=${ngayTaoEnd}, trangThai=${trangThai}, loaiDon=${loaiDon}, hoVaTen=${hoVaTen}, soDienThoai=${soDienThoai})}"
                   class="sort-link">‚Üë</a>
                <a th:href="@{/admin/bill-list(page=0, sort=${sortField == 'hoVaTen' && sortDirection == 'desc' ? 'hoVaTen,asc' : 'hoVaTen,desc'}, maDinhDanh=${maDinhDanh}, ngayTaoStart=${ngayTaoStart}, ngayTaoEnd=${ngayTaoEnd}, trangThai=${trangThai}, loaiDon=${loaiDon}, hoVaTen=${hoVaTen}, soDienThoai=${soDienThoai})}"
                   class="sort-link">‚Üì</a>
            </th>
            <th scope="col">S·ªë ƒëi·ªán tho·∫°i<br>

            </th>
            <th scope="col">Ng√†y ƒë·∫∑t
                <a th:href="@{/admin/bill-list(page=0, sort=${sortField == 'ngayTao' && sortDirection == 'asc' ? 'ngayTao,desc' : 'ngayTao,asc'}, maDinhDanh=${maDinhDanh}, ngayTaoStart=${ngayTaoStart}, ngayTaoEnd=${ngayTaoEnd}, trangThai=${trangThai}, loaiDon=${loaiDon}, hoVaTen=${hoVaTen}, soDienThoai=${soDienThoai})}"
                   class="sort-link">‚Üë</a>
                <a th:href="@{/admin/bill-list(page=0, sort=${sortField == 'ngayTao' && sortDirection == 'desc' ? 'ngayTao,asc' : 'ngayTao,desc'}, maDinhDanh=${maDinhDanh}, ngayTaoStart=${ngayTaoStart}, ngayTaoEnd=${ngayTaoEnd}, trangThai=${trangThai}, loaiDon=${loaiDon}, hoVaTen=${hoVaTen}, soDienThoai=${soDienThoai})}"
                   class="sort-link">‚Üì</a>
            </th>
            <th scope="col">T·ªïng ti·ªÅn
                <a th:href="@{/admin/bill-list(page=0, sort=${sortField == 'tongTien' && sortDirection == 'asc' ? 'tongTien,desc' : 'tongTien,asc'}, maDinhDanh=${maDinhDanh}, ngayTaoStart=${ngayTaoStart}, ngayTaoEnd=${ngayTaoEnd}, trangThai=${trangThai}, loaiDon=${loaiDon}, hoVaTen=${hoVaTen}, soDienThoai=${soDienThoai})}"
                   class="sort-link">‚Üë</a>
                <a th:href="@{/admin/bill-list(page=0, sort=${sortField == 'tongTien' && sortDirection == 'desc' ? 'tongTien,asc' : 'tongTien,desc'}, maDinhDanh=${maDinhDanh}, ngayTaoStart=${ngayTaoStart}, ngayTaoEnd=${ngayTaoEnd}, trangThai=${trangThai}, loaiDon=${loaiDon}, hoVaTen=${hoVaTen}, soDienThoai=${soDienThoai})}"
                   class="sort-link">‚Üì</a>
            </th>
            <th scope="col">Lo·∫°i ƒë∆°n</th>
            <th scope="col">H√¨nh th·ª©c TT</th>
            <th scope="col">Tr·∫°ng th√°i</th>
            <th scope="col">Thao t√°c</th>
        </tr>
        </thead>

        <tbody>
        <tr th:each="item:${items}" class="clickable-row" th:data-maHoaDon="${item.maHoaDon}">
            <th scope="row" class="scope-highlight" th:text="${item.maDinhDanh}">HD09347</th>
            <!--            <th><a class="text-primary" th:href="@{'/admin/bill-return-detail-code/' + ${item.maDoiTra} }" th:text="${item.maDoiTra}"></a></th>-->
            <td th:text="${item.hoVaTen}">Mark</td>
            <td th:text="${item.soDienThoai}">03843234</td>
            <td th:text="${#temporals.format(item.ngayTao, 'dd-MM-yyyy HH:mm')}">03843234</td>
            <td th:text="${#numbers.formatDecimal(item.tongTien, 0, 'POINT', 0, 'COMMA')}"></td>
            <td>
                <span th:if="${item.loaiDon == T(com.example.demo.entities.enumClass.InvoiceType).OFFLINE}">T·∫°i qu·∫ßy</span>
                <span th:if="${item.loaiDon == T(com.example.demo.entities.enumClass.InvoiceType).ONLINE}">Online</span>
            </td>
            <td>
                <!--                 <span th:if="${item.hinhThucThanhToan == 'THE'}">-->
                <!--                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="#f5b836" d="M2 15v-3h3v-2l4 3.5L5 17v-2H2m20-6.3V10H10V8.7L16 5l6 3.7M10 17h12v2H10v-2m5-6h2v5h-2v-5m-4 0h2v5h-2v-5m8 0h2v5h-2v-5Z"/></svg>-->
                <!--                    &nbsp;Th·∫ª-->
                <!--                </span>-->
                <span th:if="${item.hinhThucThanhToan == 'THE'}">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
        <path fill="#f5b836" d="M2 6h20v12H2V6zm0-2c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H2zm16 9h-4v2h4v-2zm-6 0h-4v2h4v-2zm0-7h6v2h-6V6zm0 4h6v2h-6v-2zm-4-5H6v2h6V6z"/>
    </svg>
    &nbsp;Th·∫ª
</span>
                <!--                <span th:if="${item.hinhThucThanhToan == 'CHUYEN_KHOAN'}">-->
                <!--                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="#f5b836" d="M2 15v-3h3v-2l4 3.5L5 17v-2H2m20-6.3V10H10V8.7L16 5l6 3.7M10 17h12v2H10v-2m5-6h2v5h-2v-5m-4 0h2v5h-2v-5m8 0h2v5h-2v-5Z"/></svg>-->
                <!--                    &nbsp;Chuy·ªÉn kho·∫£n-->
                <!--                </span>-->
                <span th:if="${item.hinhThucThanhToan == 'CHUYEN_KHOAN'}">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
        <path fill="#f5b836" d="M12 2L2 7h20L12 2zm0 5l-10 5v5h20v-5l-10-5zm0 0" />
        <path fill="#f5b836" d="M14 15h-4v4h4v-4zm0-6h-4v4h4V9zM2 5v10h20V5H2zm0-3h20a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1z"/>
    </svg>
    &nbsp;Chuy·ªÉn kho·∫£n
</span>
                <!--                <span th:if="${item.hinhThucThanhToan == 'TIEN_MAT'}">-->
                <!--                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke="green" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M19 22v-7.1a7 7 0 0 0-2.052-4.95L14.998 8v6.587c0 .89-1.077 1.337-1.707.707L11.996 14c-.5-.5-1.701-.8-2.502 0c-.8.8-.5 2 0 2.5l5.504 5.5"/><path d="M11 2h2a2 2 0 0 1 2 2v2m-4-4c0 1.333.8 4 4 4m-4-4H9m6 4v6M5 12v2a2 2 0 0 0 2 2h2c0-1.333-.8-4-4-4zm0 0V6m4-4H7a2 2 0 0 0-2 2v2m4-4c0 1.333-.8 4-4 4"/><circle cx="10" cy="9" r="1" transform="rotate(90 10 9)"/></g></svg>-->
                <!--                    &nbsp;Ti·ªÅn m·∫∑t-->
                <!--                </span>-->
                <span th:if="${item.hinhThucThanhToan == 'TIEN_MAT'}">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
        <g fill="none" stroke="green" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
            <path d="M3 10h18v10H3z" /> <!-- H√¨nh ch·ªØ nh·∫≠t ƒë·∫°i di·ªán cho ti·ªÅn t·ªá -->
            <path d="M3 10V5a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v5" /> <!-- Ph·∫ßn tr√™n c·ªßa bi·ªÉu t∆∞·ª£ng -->
            <circle cx="7" cy="12" r="1" fill="green"/> <!-- M·ªôt ƒë·ªìng ti·ªÅn nh·ªè -->
            <circle cx="17" cy="12" r="1" fill="green"/> <!-- M·ªôt ƒë·ªìng ti·ªÅn nh·ªè kh√°c -->
        </g>
    </svg>
    &nbsp;Ti·ªÅn m·∫∑t
</span>

            </td>
            <td>
                     <span class="text-warning p-1 rounded border border-warning font-weight-bold"
                           th:if="${item.trangThai == T(com.example.demo.entities.enumClass.BillStatus).CHO_HANG_VE}"><i class="fas fa-check-square"></i>&nbsp;Ch·ªù h√†ng v·ªÅ
                    </span>
                <span class="text-warning p-1 rounded border border-warning font-weight-bold"
                      th:if="${item.trangThai == T(com.example.demo.entities.enumClass.BillStatus).CHO_XAC_NHAN}"><i class="fas fa-check-square"></i>&nbsp;Ch·ªù x√°c nh·∫≠n
                    </span>
                <span class="text-secondary p-1 rounded border border-secondary font-weight-bold"

                      th:if="${item.trangThai == T(com.example.demo.entities.enumClass.BillStatus).CHO_LAY_HANG}"><i class="fas fa-check-square"></i>&nbsp;Ch·ªù l·∫•y h√†ng
                    </span>
                <span class="text-primary p-1 rounded border border-primary font-weight-bold"
                      th:if="${item.trangThai == T(com.example.demo.entities.enumClass.BillStatus).CHO_GIAO_HANG}"><i class="fas fa-check-square"></i>&nbsp;Ch·ªù giao h√†ng
                    </span>

                <span  class="text-success p-1 rounded border border-success font-weight-bold"
                       th:if="${item.trangThai == T(com.example.demo.entities.enumClass.BillStatus).HOAN_THANH}"><i class="fas fa-check-square"></i>&nbsp;Ho√†n
                        th√†nh
                    </span>
                <span  class="text-success p-1 rounded border border-success font-weight-bold"
                       th:if="${item.trangThai == T(com.example.demo.entities.enumClass.BillStatus).THAT_BAI}"><i class="fas fa-check-square"></i>&nbsp;Th·∫•t b·∫°i
                    </span>
                <!--                    <span  class="text-dark p-1 rounded border border-dark font-weight-bold"-->
                <!--                       th:if="${item.trangThai == T(com.example.demo.entities.enumClass.BillStatus).TRA_HANG}"><i class="fas fa-check-square"></i>&nbsp;-->
                <!--                    ƒê·ªïi tr·∫£-->
                <!--                    </span>-->

                <span th:if="${item.trangThai == T(com.example.demo.entities.enumClass.BillStatus).HUY}" class="text-danger p-1 rounded border border-danger font-weight-bold">
                        <i class="fa fa-times-circle"></i>&nbsp;H·ªßy
                    </span>

            </td>

            <td>
                <div class="d-flex align-items-center">
                    <form th:action="@{'/admin/update-bill-status/' + ${item.maHoaDon}}" method="get">
                        <input type="hidden" name="trangThaiDonHang" value="HUY">
                        <span type="button" th:if="${item.trangThai == T(com.example.demo.entities.enumClass.BillStatus).CHO_XAC_NHAN || item.trangThai == T(com.example.demo.entities.enumClass.BillStatus).CHO_LAY_HANG}" class="cancel-btn bg-transparent mr-2" data-toggle="tooltip" data-placement="top" title="H·ªßy ƒë∆°n">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path fill="red" d="M2.93 17.07A10 10 0 1 1 17.07 2.93A10 10 0 0 1 2.93 17.07zm1.41-1.41A8 8 0 1 0 15.66 4.34A8 8 0 0 0 4.34 15.66zm9.9-8.49L11.41 10l2.83 2.83l-1.41 1.41L10 11.41l-2.83 2.83l-1.41-1.41L8.59 10L5.76 7.17l1.41-1.41L10 8.59l2.83-2.83l1.41 1.41z"/></svg>
                        </span>
                    </form>

                    <form th:action="@{'/admin/update-bill-status/' + ${item.maHoaDon}}" method="get">
                        <span type="button" th:if="${item.trangThai != T(com.example.demo.entities.enumClass.BillStatus).HOAN_THANH && item.trangThai != T(com.example.demo.entities.enumClass.BillStatus).THAT_BAI &&
                item.trangThai != T(com.example.demo.entities.enumClass.BillStatus).HUY}"
                              class=" hover-green btn-update-status" data--toggle="tooltip" data-placement="top" th:data-status="${item.trangThai}"
                              title="Chuy·ªÉn sang tr·∫°ng th√°i ti·∫øp">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M4 18a2 2 0 1 0 4 0a2 2 0 1 0-4 0m12 0a2 2 0 1 0 4 0a2 2 0 1 0-4 0M6 12v-2a6 6 0 1 1 12 0v2"/><path d="m15 9l3 3l3-3"/></g></svg>
                        </span>
                    </form>
                </div>
            </td>
        </tr>
        </tbody>
    </table>
    <div class="clearfix float-right">
        <ul class="pagination">
            <!-- Previous Page -->
            <li th:classappend="${items.hasPrevious() ? '' : 'disabled'}" class="page-item">
                <a th:href="@{/admin/bill-list(page=0, sort=${sortField},
                                          maDinhDanh=${maDinhDanh},
                                          ngayTaoStart=${ngayTaoStart},
                                          ngayTaoEnd=${ngayTaoEnd},
                                          trangThai=${trangThai},
                                          loaiDon=${loaiDon},
                                          hoVaTen=${hoVaTen},
                                          soDienThoai=${soDienThoai})}"
                   class="page-link">
                    <i class="fas fa-angle-double-left"></i>
                </a>
            </li>

            <!-- Previous Page -->
            <li th:classappend="${items.hasPrevious() ? '' : 'disabled'}" class="page-item">
                <a th:href="@{/admin/bill-list(page=${items.number - 1},
                                          sort=${sortField},
                                          maDinhDanh=${maDinhDanh},
                                          ngayTaoStart=${ngayTaoStart},
                                          ngayTaoEnd=${ngayTaoEnd},
                                          trangThai=${trangThai},
                                          loaiDon=${loaiDon},
                                          hoVaTen=${hoVaTen},
                                          soDienThoai=${soDienThoai})}"
                   class="page-link">
                    <i class="fas fa-angle-left"></i>
                </a>
            </li>

            <!-- Next Page -->
            <li th:classappend="${items.hasNext() ? '' : 'disabled'}" class="page-item">
                <a th:href="@{/admin/bill-list(page=${items.number + 1},
                                          sort=${sortField},
                                          maDinhDanh=${maDinhDanh},
                                          ngayTaoStart=${ngayTaoStart},
                                          ngayTaoEnd=${ngayTaoEnd},
                                          trangThai=${trangThai},
                                          loaiDon=${loaiDon},
                                          hoVaTen=${hoVaTen},
                                          soDienThoai=${soDienThoai})}"
                   class="page-link">
                    <i class="fas fa-angle-right"></i>
                </a>
            </li>

            <!-- Last Page -->
            <li th:classappend="${items.hasNext() ? '' : 'disabled'}" class="page-item">
                <a th:href="@{/admin/bill-list(page=${items.totalPages - 1},
                                          sort=${sortField},
                                          maDinhDanh=${maDinhDanh},
                                          ngayTaoStart=${ngayTaoStart},
                                          ngayTaoEnd=${ngayTaoEnd},
                                          trangThai=${trangThai},
                                          loaiDon=${loaiDon},
                                          hoVaTen=${hoVaTen},
                                          soDienThoai=${soDienThoai})}"
                   class="page-link">
                    <i class="fas fa-angle-double-right"></i>
                </a>
            </li>
        </ul>
    </div>
    <script th:inline="javascript">
        $(document).ready(function () {
            $('#form-search').on('submit', function (e) {
                if($('#ngayTaoStart').val() && $('#ngayTaoEnd').val()) {
                    if( $('#ngayTaoEnd').val() < $('#ngayTaoStart').val()) {
                        Swal.fire({
                            title: "L·ªói",
                            text: `Ng√†y k·∫øt th√∫c ph·∫£i l·ªõn h∆°n ng√†y b·∫Øt ƒë·∫ßu`,
                            icon: "error",
                        })
                        return false
                    }
                }
                return true;
            })

            $('.cancel-btn').on('click', function (e) {
                e.stopPropagation()
                Swal.fire({
                    title: "X√°c nh·∫≠n?",
                    text: `B·∫°n ch·∫Øc ch·∫Øn mu·ªën h·ªßy ƒë∆°n n√†y!`,
                    icon: "warning",
                    showCancelButton: true,
                    cancelButtonText: 'H·ªßy',
                    confirmButtonText: 'X√°c nh·∫≠n',
                    reverseButtons: true
                }).then((result) => {
                    if (result.isConfirmed) {
                        $(this).closest('form').submit();
                    }
                });
            })

            $('.btn-update-status').on('click', function (e) {
                e.stopPropagation()
                var currentStatus = $(this).attr('data-status')
                var nextStatus;
                var statusMessage;
                switch (currentStatus) {
                    case "CHO_HANG_VE":
                        nextStatus = "CHO_LAY_HANG";
                        statusMessage = "Ch·ªù l·∫•y h√†ng";
                        break;
                    case "CHO_XAC_NHAN":
                        nextStatus = "CHO_LAY_HANG";
                        statusMessage = "Ch·ªù l·∫•y h√†ng";
                        break;
                    case "CHO_LAY_HANG":
                        nextStatus = "CHO_GIAO_HANG";
                        statusMessage = "Ch·ªù giao h√†ng";
                        break;
                    case "CHO_GIAO_HANG":
                        nextStatus = "HOAN_THANH";
                        statusMessage = "Ho√†n th√†nh";
                        break;
                }
                Swal.fire({
                    title: "X√°c nh·∫≠n?",
                    text: `X√°c nh·∫≠n chuy·ªÉn sang ${statusMessage}`,
                    icon: "warning",
                    showCancelButton: true,
                    cancelButtonText: 'H·ªßy',
                    confirmButtonText: 'X√°c nh·∫≠n',
                    reverseButtons: true
                }).then((result) => {
                    if (result.isConfirmed) {
                        const form = $(this).closest("form");
                        var url = form.attr('action') + `?trangThaiDonHang=${nextStatus}`
                        window.location.href = url
                    }
                });
            })
        })
        var lastClickTime = 0;
        var doubleClickDelay = 300;

        var clickableRows = document.querySelectorAll(".clickable-row");

        clickableRows.forEach(function(row) {
            row.addEventListener("click", function(e) {
                var currentTime = new Date().getTime();
                if (currentTime - lastClickTime < doubleClickDelay) {
                    // ƒê√¢y l√† double click
                    var maHoaDon = row.getAttribute("data-maHoaDon");
                    window.location.href = "/admin/getbill-detail/" + maHoaDon;
                }
                lastClickTime = currentTime;
            });
        });

        function exportToExcel() {
            var page = document.getElementById("pageValue").value;
            var sort = document.getElementById("sortValue").value;
            var ngayTaoStart = document.getElementById("ngayTaoStart").value;
            var ngayTaoEnd = document.getElementById("ngayTaoEnd").value;

            Swal.fire({
                title: "X√°c nh·∫≠n ?",
                text: "X√°c nh·∫≠n export file excel ?",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            })
                .then((willDelete) => {
                    if (willDelete) {
                        var exportUrl = `/admin/export-bill?page=${page}&sort=${sort}&ngayTaoStart=${ngayTaoStart}&ngayTaoEnd=${ngayTaoEnd}`;
                        window.location.href = exportUrl;
                    }
                });
        }




    </script>
</div>
</body>
</html>
